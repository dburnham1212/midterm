<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Quizzes</title>

  <!-- Include global styles-->
  <%- include('partials/_global_styling') %>

  <script src="/vendor/jquery-3.0.0.js"></script>
  <script defer src="/scripts/app.js"></script>
</head>
<body>
  <%- include('partials/_header') %>
  <!-- middle -->
  <main>
    <h1 class="text-centered">My Quizzes</h1>
    <span class="list-item">
      <p class="list-item-text">Quiz Name</p>
      <p class="list-item-text">Score</p>
      <p class="list-item-text">Take</p>
      <p class="list-item-text">Rating</p>
    </span>

    <%for (const quiz of quizzes) { %>
    <span class="list-item">
      <p class="list-item-text"><%= quiz.title %></p>
      <% let currentResult;
      for(const result of results) {
        if(result.quiz_id === quiz.id) {
          currentResult = result;
        }
      } if (currentResult) { %>
        <p class="list-item-text"><%= currentResult.highest_score %> / <%= currentResult.out_of %></p>
      <% } else { %>
        <p class="list-item-text">N/A</p>
      <% } %>
      <p class="list-item-text"><a href="/takeQuiz/<%= quiz.id %>">Take Quiz</a></p>
      <p class="list-item-text"><%= quiz.rating %></p>
    </span>
    <% }
    if(quizzes.length === 0){ %>
      <span>
        <p class = "text-centered"> NONE </p>
      </span>
    <% } %>
    <h1 class="text-centered">Favourite Quizzes</h1>
    <span class="list-item">
      <p class="list-item-text">Quiz Name</p>
      <p class="list-item-text">Score</p>
      <p class="list-item-text">Take</p>
      <p class="list-item-text">Rating</p>
    </span>
    <%for (const quiz of favourites) { %>
    <span class="list-item">
      <p class="list-item-text"><%= quiz.title %></p>
      <% let currentResult;
      for(const result of results) {
        if(result.quiz_id === quiz.id) {
          currentResult = result;
        }
      } if (currentResult) { %>
        <p class="list-item-text"><%= currentResult.highest_score %> / <%= currentResult.out_of %></p>
      <% } else { %>
        <p class="list-item-text">N/A</p>
      <% } %>
      <p class="list-item-text"><a href ="/takeQuiz/<%= quiz.id %>">Take Quiz</a></p>
      <p class="list-item-text"><%= quiz.rating %></p>
    </span>
    <% }
    if(favourites.length === 0){ %>
      <span>
        <p class = "text-centered"> NONE </p>
      </span>
    <% } %>
  </main>
  <!-- footer -->
  <div>
  </div>
</body>
</html>
